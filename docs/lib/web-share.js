function t(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}function e(t,e){return e.get?e.get.call(t):e.value}function s(s,i){return e(s,t(s,i,"get"))}function i(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(t,e,s){i(t,e),e.set(t,s)}function r(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}function h(e,s,i){return r(e,t(e,s,"set"),i),i}function n(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function l(t,e){i(t,e),e.add(t)}const o=document.createElement("template");o.innerHTML='\n  <slot name="button"><button type="button" part="button"><slot name="button-content">Share</slot></button></slot>\n';var d=new WeakMap,u=new WeakMap,c=new WeakMap,b=new WeakMap,w=new WeakMap,p=new WeakSet,v=new WeakSet;class m extends HTMLElement{static get observedAttributes(){return["disabled"]}connectedCallback(){n(this,v,g).call(this,"shareUrl"),n(this,v,g).call(this,"shareTitle"),n(this,v,g).call(this,"shareText"),n(this,v,g).call(this,"shareFiles"),n(this,v,g).call(this,"disabled"),s(this,d)&&s(this,d).addEventListener("slotchange",s(this,w)),s(this,u)&&s(this,u).addEventListener("click",s(this,b))}disconnectedCallback(){s(this,d)&&s(this,d).removeEventListener("slotchange",s(this,w)),s(this,u)&&s(this,u).removeEventListener("click",s(this,b))}attributeChangedCallback(t){"disabled"===t&&s(this,u)&&(s(this,u).disabled=this.disabled,s(this,u).setAttribute("aria-disabled",this.disabled),s(this,u).part&&s(this,u).part.contains("button")&&s(this,u).part.toggle("button--disabled",this.disabled))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get shareUrl(){return this.getAttribute("share-url")}set shareUrl(t){this.setAttribute("share-url",t)}get shareTitle(){return this.getAttribute("share-title")}set shareTitle(t){this.setAttribute("share-title",t)}get shareText(){return this.getAttribute("share-text")}set shareText(t){this.setAttribute("share-text",t)}get shareFiles(){return s(this,c)}set shareFiles(t){h(this,c,t)}async share(){if(!this.disabled)try{const t={};this.shareUrl&&(t.url=this.shareUrl),this.shareTitle&&(t.title=this.shareTitle),this.shareText&&(t.text=this.shareText),Array.isArray(this.shareFiles)&&this.shareFiles.length>0&&navigator.canShare&&navigator.canShare({files:this.shareFiles})&&(t.files=this.shareFiles),await navigator.share(t),this.dispatchEvent(new CustomEvent("web-share:success",{bubbles:!0,composed:!0,detail:{shareData:t}}))}catch(t){if("AbortError"===t.name)return this.dispatchEvent(new Event("web-share:abort",{bubbles:!0,composed:!0}));this.dispatchEvent(new CustomEvent("web-share:error",{bubbles:!0,composed:!0,detail:{error:t}}))}}static defineCustomElement(t="web-share"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,m)}constructor(){super(),l(this,p),l(this,v),a(this,d,{writable:!0,value:void 0}),a(this,u,{writable:!0,value:void 0}),a(this,c,{writable:!0,value:null}),a(this,b,{writable:!0,value:t=>{t.preventDefault(),this.disabled||(this.dispatchEvent(new Event("web-share:click",{bubbles:!0,composed:!0})),this.share())}}),a(this,w,{writable:!0,value:t=>{t.target&&"button"===t.target.name&&(s(this,u)&&s(this,u).removeEventListener("click",s(this,b)),h(this,u,n(this,p,f).call(this)),s(this,u)&&(s(this,u).addEventListener("click",s(this,b)),"BUTTON"===s(this,u).nodeName||s(this,u).hasAttribute("role")||s(this,u).setAttribute("role","button")))}}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(o.content.cloneNode(!0))),h(this,d,this.shadowRoot.querySelector('slot[name="button"]')),h(this,u,n(this,p,f).call(this))}}function f(){return s(this,d)?s(this,d).assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"button"===t.getAttribute("slot"))):null}function g(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}export{m as WebShare};
//# sourceMappingURL=web-share.js.map
